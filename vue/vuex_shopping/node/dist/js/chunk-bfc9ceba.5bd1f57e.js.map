{"version":3,"sources":["webpack:///./src/views/cart.vue?0504","webpack:///./src/views/cart.vue?3e64","webpack:///src/views/cart.vue","webpack:///./src/views/cart.vue?afc0","webpack:///./src/views/cart.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_l","item","index","key","attrs","productDictList","id","image","_v","_s","name","cost","on","$event","handleCount","count","handleDelete","cartList","length","_e","directives","rawName","value","expression","domProps","target","composing","promotionCode","handleCheckCode","countAll","costAll","promotion","handleOrder","staticRenderFns","component"],"mappings":"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","file":"js/chunk-bfc9ceba.5bd1f57e.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cart.vue?vue&type=style&index=0&id=214ddd7d&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cart.vue?vue&type=style&index=0&id=214ddd7d&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cart\"},[_vm._m(0),_c('div',{staticClass:\"cart-content\"},[_vm._l((_vm.cartList),function(item,index){return _c('div',{key:index,staticClass:\"cart-content-main\"},[_c('div',{staticClass:\"cart-info\"},[_c('img',{attrs:{\"src\":_vm.productDictList[item.id].image}}),_c('span',[_vm._v(_vm._s(_vm.productDictList[item.id].name))])]),_c('div',{staticClass:\"cart-price\"},[_vm._v(\" ￥ \"+_vm._s(_vm.productDictList[item.id].cost)+\" \")]),_c('div',{staticClass:\"cart-count\"},[_c('span',{staticClass:\"cart-control-minus\",on:{\"click\":function($event){return _vm.handleCount(index, -1)}}},[_vm._v(\"-\")]),_vm._v(\" \"+_vm._s(item.count)+\" \"),_c('span',{staticClass:\"cart-control-add\",on:{\"click\":function($event){return _vm.handleCount(index, 1)}}},[_vm._v(\"+\")])]),_c('div',{staticClass:\"cart-cost\"},[_vm._v(\" ￥ \"+_vm._s(_vm.productDictList[item.id].cost * item.count)+\" \")]),_c('div',{staticClass:\"cart-delete\"},[_c('span',{staticClass:\"cart-control-delete\",on:{\"click\":function($event){return _vm.handleDelete(index)}}},[_vm._v(\"删除\")])])])}),(!_vm.cartList.length)?_c('div',{staticClass:\"cart-empty\"},[_vm._v(\"购物车为空\")]):_vm._e()],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cartList.length),expression:\"cartList.length\"}],staticClass:\"cart-promotion\"},[_c('span',[_vm._v(\"使用优惠券\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.promotionCode),expression:\"promotionCode\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.promotionCode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.promotionCode=$event.target.value}}}),_c('span',{staticClass:\"cart-control-promotion\",on:{\"click\":_vm.handleCheckCode}},[_vm._v(\"验证\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cartList.length),expression:\"cartList.length\"}],staticClass:\"cart-footer\"},[_c('div',{staticClass:\"cart-footer-desc\"},[_vm._v(\" 共计 \"),_c('span',[_vm._v(_vm._s(_vm.countAll))])]),_c('div',{staticClass:\"cart-footer-desc\"},[_vm._v(\" 应付总额 \"),_c('span',[_vm._v(_vm._s(_vm.costAll - _vm.promotion))]),_c('br'),(_vm.promotion)?[_vm._v(\" (优惠\"),_c('span',[_vm._v(\"￥ \"+_vm._s(_vm.promotion)+\" \")]),_vm._v(\") \")]:_vm._e()],2),_c('div',{staticClass:\"cart-footer-desc\"},[_c('div',{staticClass:\"cart-control-order\",on:{\"click\":_vm.handleOrder}},[_vm._v(\"现在结算\")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cart-header\"},[_c('div',{staticClass:\"cart-header-title\"},[_vm._v(\"购物清单\")]),_c('div',{staticClass:\"cart-header-main\"},[_c('div',{staticClass:\"cart-info\"},[_vm._v(\"商品信息\")]),_c('div',{staticClass:\"cart-price\"},[_vm._v(\"单价\")]),_c('div',{staticClass:\"cart-count\"},[_vm._v(\"数量\")]),_c('div',{staticClass:\"cart-cost\"},[_vm._v(\"小计\")]),_c('div',{staticClass:\"cart-delete\"},[_vm._v(\"删除\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"cart\">\n        <div class=\"cart-header\">\n            <div class=\"cart-header-title\">购物清单</div>\n            <div class=\"cart-header-main\">\n                <div class=\"cart-info\">商品信息</div>\n                <div class=\"cart-price\">单价</div>\n                <div class=\"cart-count\">数量</div>\n                <div class=\"cart-cost\">小计</div>\n                <div class=\"cart-delete\">删除</div>\n            </div>\n        </div>\n        <div class=\"cart-content\">\n            <!-- 列表显示购物清单 -->\n            <div class=\"cart-content-main\" v-for=\"(item, index) in cartList\" :key=\"index\">\n                <div class=\"cart-info\">\n                    <img :src=\"productDictList[item.id].image\">\n                    <span>{{productDictList[item.id].name}}</span>\n                </div>\n                <div class=\"cart-price\">\n                    ￥ {{productDictList[item.id].cost}}\n                </div>\n                <div class=\"cart-count\">\n                    <span class=\"cart-control-minus\"\n                          @click=\"handleCount(index, -1)\">-</span>\n                    {{item.count}}\n                    <span class=\"cart-control-add\"\n                          @click=\"handleCount(index, 1)\">+</span>\n                </div>\n                <div class=\"cart-cost\">\n                    ￥ {{productDictList[item.id].cost * item.count}}\n                </div>\n                <div class=\"cart-delete\">\n                    <span class=\"cart-control-delete\"\n                          @click=\"handleDelete(index)\">删除</span>\n                </div>\n            </div>\n            <div class=\"cart-empty\" v-if=\"!cartList.length\">购物车为空</div>\n        </div>\n        <div class=\"cart-promotion\" v-show=\"cartList.length\">\n            <span>使用优惠券</span>\n            <input type=\"text\" v-model=\"promotionCode\">\n            <span class=\"cart-control-promotion\"\n                  @click=\"handleCheckCode\">验证</span>\n        </div>\n        <div class=\"cart-footer\" v-show=\"cartList.length\">\n            <div class=\"cart-footer-desc\">\n                共计 <span>{{countAll}}</span>\n            </div>\n            <div class=\"cart-footer-desc\">\n                应付总额 <span>{{costAll - promotion}}</span>\n                <br>\n                <template v-if=\"promotion\">\n                    (优惠<span>￥ {{promotion}} </span>)\n                </template>\n            </div>\n            <div class=\"cart-footer-desc\">\n                <div class=\"cart-control-order\"\n                     @click=\"handleOrder\">现在结算</div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import product_data from '../api/product';\n    export default {\n        name: \"cart\",\n        data(){\n            return {\n                promotion: 0,\n                promotionCode: '',\n                productList: product_data\n            }\n        },\n        computed: {\n            //购物车数据\n            cartList(){\n                return this.$store.state.cartList;\n            },\n            //设置字典对象，方便查询\n            productDictList(){\n                const dict = {};\n                this.productList.forEach(item => {\n                    dict[item.id] = item;\n                });\n                return dict;\n            },\n            //购物车商品总数\n            countAll(){\n                let count = 0;\n                this.cartList.forEach(item => {\n                    count += item.count;\n                });\n                return count;\n            },\n            //购物车商品总价\n            costAll(){\n                let cost = 0;\n                this.cartList.forEach(item => {\n                    cost += this.productDictList[item.id].cost * item.count;\n                });\n                return cost;\n            }\n        },\n        methods: {\n            //通知Vuex,完成下单\n            handleOrder(){\n                this.$store.dispatch('buy').then(() => {\n                    window.alert('购买成功');\n                })\n            },\n            //验证优惠码，使用ccylovehs代替优惠券字符串\n            handleCheckCode(){\n                if(this.promotionCode === ''){\n                    window.alert('请输入优惠码');\n                    return;\n                }\n                if(this.promotionCode !== 'love_liuziyi'){\n                    window.alert('优惠码输入错误');\n                    return;\n                }\n                this.promotion = 500;\n            },\n            //修改购物车数量\n            handleCount(index, count){\n                //最小值设置1\n                if(count < 0 && this.cartList[index].count === 1) return;\n                this.$store.commit('editCartCount', {\n                    id: this.cartList[index].id,\n                    count: count\n                });\n            },\n            //根据index查找商品id进行删除\n            handleDelete(index){\n                this.$store.commit('deleteCart', this.cartList[index].id);\n            }\n        },\n        mounted(){\n            if(window.localStorage.getItem('username')==null){\n                window.alert('请先完成登录');\n                this.$router.replace(\"/login\")\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .cart{\n        margin: 32px;\n        background: #fff;\n        border: 1px solid #dddee1;\n        border-radius: 10px;\n    }\n    .cart-header-title{\n        padding: 16px 32px;\n        border-bottom: 1px solid #dddee1;\n        border-radius: 10px 10px 0 0;\n        background: #f8f8f9;\n    }\n    .cart-header-main{\n        padding: 8px 32px;\n        overflow: hidden;\n        border-bottom: 1px solid #dddee1;\n        background: #eee;\n        overflow: hidden;\n    }\n    .cart-empty{\n        text-align: center;\n        padding: 32px;\n    }\n    .cart-header-main div{\n        text-align: center;\n        float: left;\n        font-size: 14px;\n    }\n    div.cart-info{\n        width: 60%;\n        text-align: left;\n    }\n    .cart-price{\n        width: 10%;\n    }\n    .cart-count{\n        width: 10%;\n    }\n    .cart-cost{\n        width: 10%;\n    }\n    .cart-delete {\n        width: 10%;\n    }\n    .cart-content-main{\n        padding: 0 32px;\n        height: 60px;\n        line-height: 60px;\n        text-align: center;\n        border-bottom: 1px dashed #e9eaec;\n        overflow: hidden;\n    }\n    .cart-content-main div{\n        float: left;\n    }\n    .cart-content-main img{\n        width: 40px;\n        height: 40px;\n        position: relative;\n        top: 10px;\n    }\n    .cart-control-minus,\n    .cart-control-add{\n        display: inline-block;\n        margin: 0 4px;\n        width: 24px;\n        height: 24px;\n        line-height: 22px;\n        text-align: center;\n        background: #f8f8f9;\n        border-radius: 50%;\n        box-shadow: 0 1px 1px rgba(0,0,0,.2);\n        cursor: pointer;\n    }\n    .cart-control-delete{\n        cursor: pointer;\n        color: #2d8cf0;\n    }\n    .cart-promotion{\n        padding: 16px 32px;\n    }\n    .cart-control-promotion,\n    .cart-control-order{\n        display: inline-block;\n        padding: 8px 32px;\n        border-radius: 6px;\n        background: #2d8cf0;\n        color: #fff;\n        cursor: pointer;\n    }\n    .cart-control-promotion{\n        padding: 2px 6px;\n        font-size: 12px;\n        border-radius: 3px;\n    }\n    .cart-footer{\n        padding: 32px;\n        text-align: right;\n    }\n    .cart-footer-desc{\n        display: inline-block;\n        padding: 0 16px;\n    }\n    .cart-footer-desc span{\n        color: #f2352e;\n        font-size: 20px;\n    }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./cart.vue?vue&type=template&id=214ddd7d&scoped=true&\"\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&id=214ddd7d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"214ddd7d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
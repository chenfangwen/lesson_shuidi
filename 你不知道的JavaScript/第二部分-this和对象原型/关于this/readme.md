# 关于this  

- 为什么要使用this --- p74  

  this提供了一种更优雅的方式来隐式"传递"一个对象引用，因此可以将API设计得更加简洁并且易于复用  

- 误解  

  - 指向自身  
    ```
    function foo(num) {
        console.log("foo:" + num);
        // 记录foo被调用的次数
        this.count++;
    }

    foo.count = 0;

    var i;

    for(i = 0; i < 10; i++) {
        if(i > 5) {
            foo(i);
        }
    }
    // foo: 6
    // foo: 7
    // foo: 8
    // foo: 9

    // foo被调用了多少次？
    console.log(foo.count); // 0
    ```
    执行foo.count = 0;时，的确翔函数对象foo添加了一个属性count。但是函数内部代码this.count中的this并不是指向那个函数对象，所以虽然属性名相同，跟对象却并不相同。  

    一些解决方法 --- p77-78  

  - 它的作用域  

    需要明确的时，this在任何情况下都不指向函数的词法作用域。  
    
    一个错误的示范 --- p80  

- this到底是什么  

  this的上下文取决于函数调用时的各种条件，this的绑定和函数声明的位置没有任何关系，只取决于函数的调用方式。  

  当一个函数被调用时，会创建一个活动记录(有时候也称为执行上下文)。这个记录会包含在哪里被调用(调用栈)、函数的调用方式、传入的参数等信息。this就是这记录的一个属性，会在函数执行的过程中用到。

- 小结  

  this既不指向函数自身也不指向函数的词法作用域  

  this实际上时在函数调用时发生的绑定，它指向什么完全取决于函数在哪里被调用
